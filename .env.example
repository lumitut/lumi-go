# =============================================================================
# lumi-go â€” Environment configuration (example)
# Copy to .env and adjust values for your environment.
# Variables are read at process start; secrets should be injected via a secret
# manager in staging/prod.
# =============================================================================

# --- General ---
ENV=dev                         # dev|staging|prod
SERVICE_NAME=lumi               # logical service name (for logs/metrics/traces)
SERVICE_VERSION=0.0.0           # overridden by CI at build time
GIN_MODE=debug                  # debug|release (prod must be 'release')

# --- Network & Ports ---
LUMI_HTTP_ADDR=:8080
LUMI_RPC_ADDR=:8081
LUMI_PROM_ADDR=:9090

# --- Timeouts & Lifecycle ---
LUMI_READ_TIMEOUT=5s
LUMI_WRITE_TIMEOUT=10s
LUMI_IDLE_TIMEOUT=60s
LUMI_GRACE_PERIOD=20s

# --- Logging & Telemetry ---
LUMI_LOG_LEVEL=info             # debug|info|warn|error
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
# Optional: OTEL_EXPORTER_OTLP_HEADERS=x-otlp-token=changeme

# --- Data Stores ---
LUMI_PG_URL=postgres://postgres:postgres@localhost:5432/lumi?sslmode=disable
LUMI_REDIS_URL=redis://localhost:6379/0

# --- AuthN/Z (JWT via JWKS) ---
LUMI_JWT_ISSUER=https://auth.example.com/
LUMI_JWT_AUDIENCE=lumi
LUMI_JWKS_URL=https://auth.example.com/.well-known/jwks.json

# --- Rate limiting & Resilience ---
LUMI_RATE_RPS=100
LUMI_CB_FAILURES=5
LUMI_CB_TIMEOUT=30s

# --- Feature Flags ---
LUMI_FLAGS_PROVIDER=none        # none|unleash|gofeatureflag
LUMI_FLAGS_URL=
LUMI_FLAGS_TOKEN=

# --- HTTP specifics ---
LUMI_TRUSTED_PROXIES=           # comma-separated CIDRs for real IP (e.g., 10.0.0.0/8)
LUMI_ALLOWED_ORIGINS=           # CORS allowlist, comma-separated (empty = disabled)

# --- Metrics & Profiling ---
LUMI_METRICS_PREFIX=lumi_
LUMI_PPROF_ENABLED=true         # enable /debug/pprof in dev only

# --- Queues/Eventing (choose per service; optional) ---
LUMI_KAFKA_BROKERS=             # e.g., localhost:9092
LUMI_AWS_REGION=ap-southeast-2
LUMI_SQS_QUEUE_URL=
LUMI_SNS_TOPIC_ARN=

# --- Misc ---
LUMI_REQUEST_ID_HEADER=X-Request-ID
